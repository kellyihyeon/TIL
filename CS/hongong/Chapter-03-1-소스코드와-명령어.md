# 03 명령어

### 왜 배워야 돼?

내가 자바 코드로 작성한 소스 코드를 컴퓨터가 어떻게 해석할 수 있는 걸까? 추측해보자면 `소스 코드 → 번역기  → 컴퓨터가 이해할 수 있는 언어` 이 흐름이겠지? 그렇다면 번역기가 소스 코드를 분해하는 과정을 알아내면 되겠다! 이게 명령어랑 관계가 있는 걸까?

### 배워야 하는 이유

모든 소스 코드는 컴퓨터 내부에서 명령어로 변환되기 때문입니다. 프로그래밍 언어가 어떻게 명령어가 되어 실행되는지 알아봅시다.

# 3-1. 소스 코드와 명령어

## 고급 언어와 저급 언어

- 고급 언어
    - 사람을 위한 언어
    - 대부분의 프로그래밍 언어
- 저급 언어
    - 컴퓨터가 직접 이해하고 실행할 수 있는 언어
    - 저급 언어는 명령어로 이루어져 있음
    - 종류
        - 기계어: 0과 1의 명령어 비트로 이루어진 언어
        - 어셈블리어
- 컴퓨터가 이해하고 실행할 수 있는 언어는 오직 저급 언어 뿐입니다. 그래서 고급 언어로 작성된 소스 코드가 실행되려면 무조건 저급 언어로 변환되어야 해요.

### 기계어와 어셈블리어

```java
기계어         어셈블리어
0101 0101 -> push rbp
0101 1101 -> pop rbp
```

- 기계어를 보면 이게 무엇을 의미하는지, 그래서 컴퓨터가 어떻게 동작할 것인지 전혀 예측도 안되고 이해도 안됩니다. 기계어는 컴퓨터가 이해할 수 있는 컴퓨터를 위한 언어이니까요. 그래서 등장한 언어가 어셈블리어 입니다.
- 어셈블리어는 0과 1로 표현된 기계어를 읽기 편한 형태로 번역한 언어입니다.

### 어셈블리어를 알아야 하나요?

- 어셈블리어를 잠깐 다시 살펴봅시다.
    
    ```java
    push rbp
    mov rbp, rsp
    mov DWORD PTR [rbp-4], 1
    ```
    
    - push, mov 는 추측이 되는데 뒤의 명령어는 전혀 모르겠습니다. 몰라도 됩니다. 다만, 어셈블리어 한 줄 한줄이 명령어라는 사실만 기억해둡시다.
    - 기계어 보다는 어셈블리어가 그나마 읽기에는 편한 것 같습니다만 우리가 주로 사용하는 프로그래밍 언어와는 많이 다른 것 같아요. 어셈블리어로 개발하라고 한다면 저는 못할 것 같습니다. 그래서 고급 언어가 필요한 거예요!!!
- 어셈블리어를 작성하거나 관찰할 일이 거의 없는 개발자도 있죠. 저처럼요. 굳이 알아야 할 필요가 있을까요? 어셈블리어를 읽을 수 있다면 뭐가 좋을까요? 어셈블리어를 읽으면 관찰을 할 수가 있습니다.
컴퓨터가 프로그램을 어떤 과정으로 실행하는지 어떤 절차로 작동하는지 근본적인 작동 원리를 추적하고 관찰할 수가 있습니다.

## 컴파일 언어와 인터프리터 언어

고급 언어는 어떻게 저급 언어로 변환될까요? 두 가지 방식이 있어요. 

```java
1. 컴파일 방식
2. 인터프리트 방식
```

이제 추측이 가능하겠죠? 컴파일 방식으로 작동하는 프로그래밍 언어를 **컴파일 언어**, 인터프리트 방식으로 작동하는 프로그래밍 언어를 **인터프리터 언어** 라고 합니다.

### 컴파일 언어

- 컴파일러에 의해 소스 코드 **전체**가 저급 언어로 변환되어 실행되는 **고급 언어**
- 대표적인 언어: C 언어
- 컴파일
    - 소스 코드 전체가 저급 언어로 변환되는 과정
- 컴파일러
    - 컴파일을 수행해주는 도구
- 컴파일러가 개발자가 작성한 소스 코드 전체를 쭉 훑어보면서 문법적 오류는 없는지, 실행 가능한 코드인지를 체크해가면서 소스 코드를 저급 언어로 컴파일 해요. 이때 소스 코드에서 오류를 하나라도 발견한다? 네, 바로 컴파일에 실패합니다. 컴파일이 성공한다면 개발자의 소스 코드는 컴퓨터가 이해할 수 있는 언어인 저급 언어로 변환이 돼요.
- 컴파일러를 통해서 저급 언어로 변환된 코드를 목적 코드 라고 합니다.

![컴파일_언어.png](/CS/hongong/img/컴파일_언어.png)

### 인터프리터 언어

- 인터프리터에 의해 소스 코드가 **한 줄씩** 실행되는 **고급 언어**
- 대표적인 언어: Python
- 인터프리터
    - 소스 코드를 한 줄씩 저급 언어로 변환해주는 실행 도구
- 인터프리터 언어는 소스 코드를 한 줄씩 실행하기 때문에 N번째 줄에 문법 오류가 있어도 N-1번째 줄까지는 수행됩니다. 컴파일 언어와는 이점이 달라요.
- 일반적으로 인터프리터 언어는 컴파일 언어보다 느립니다. 컴파일의 결과물인 목적 코드는 컴퓨터가 이해할 수 있는 저급 언어이지만 인터프리터 언어는 소스 코드 마지막 줄 까지 한 줄 한 줄씩 저급 언어로 해석하면서 실행해야 하기 때문입니다.

## [심화] 목적 파일과 실행 파일

- **목적 파일**: 목적 코드로 이루어진 파일
- **실행 파일**: 실행 코드로 이루어진 파일
- 이미지 파일은 이미지로 이루어진 파일을 의미하고, 텍스트 파일은 텍스트로 이루어진 파일을 의미합니다. 마찬가지로 목적 파일은 목적 코드로 이루어진 파일을 의미하고 실행 파일은 실행 코드로 이루어진 파일을 의미해요.
- 목적 코드가 실행 파일이 되기 위해서는 **링킹** 이라는 작업을 거쳐야 합니다. 링킹이 무엇일까요? 예시를 통해 살펴봅시다.

### 링킹

![링킹.png](/CS/hongong/img/링킹.png)

- C언어로 작성된 소스 코드를 컴파일 하면 목적 코드가 생성이 됩니다.
    - main.o
    - helper.o
- 목적 코드에는 소스 코드의 내용이 컴파일 된 사람이 읽기 어려운 0과 1 로 가득차있겠죠? 그럼 main.o 목적 코드는 기계가 이해할 수 있는 저급 언어이기 때문에 바로 실행을 할 수 있을까요? 할 수 없습니다.
main.c 소스 코드를 저급 언어로 변환만 한 것일 뿐 `HELPER_더하기` ,`화면_출력 라이브러리` 기능이 main.c 에는 없기 때문입니다.
- 때문에 main.o 가 실행되면 `HELPER_더하기`, `화면_출력 라이브러리` 기능을 main.o 와 연결해 줘야 하는데요. 이 작업을 **링킹** 이라고 합니다. 링킹 작업을 거치고 나면 하나의 실행 파일이 생성 됩니다.