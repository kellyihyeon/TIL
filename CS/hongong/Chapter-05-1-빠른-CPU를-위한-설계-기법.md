## 학습 키워드

- `클럭` `코어` `멀티코어` `스레드` `멀티스레드`
- 해당 키워드들이 CPU 속도와 어떤 관계가 있는가?

---

# 클럭 (clock)

- 컴퓨터의 모든 부품을 일사분란하게 움직일 수 있게 하는 시간 단위
- 클럭 신호가 빠르게 반복되면 CPU는 명령어 사이클을 더 빠르게 반복하고 다른 부품들도 그에 맞춰 작동한다.
- 클럭 속도가 높은 CPU는 일반적으로 성능이 좋다. 그래서 클럭 속도는 CPU 속도 단위로 간주되기도 한다.
- 클럭 속도는 헤르츠(Hz) 단위로 측정한다. (1초에 클럭이 몇 번 반복되는지 나타냄)
    - 클럭이 1초에 한 번 반복되면 CPU 클럭 속도는 1Hz
- 클럭 속도를 높이면 CPU를 빠르게 만드는 것은 사실이지만, 클럭 속도를 무작정 높이면 발열 문제가 발생하므로 클럭 속도만으로 CPU의 성능을 올리는 것에는 한계가 있다.

# 코어와 멀티코어

## CPU와 코어

- 전통적인 관점
    - ‘명령어를 실행하는 부품’. 원칙적으로 하나만 존재
- 오늘날의 관점
    - 기술의 발전으로 CPU 내부에는 ‘명령어를 실행하는 부품’ 을 얼마든지 만들 수 있게 됨
    - 전통적인 관점에서의 CPU의 정의는 오늘날 **코어** 라는 용어로 사용됨
    - ‘명령어를 실행하는 부품을 여러 개 포함하는 부품’으로 명칭의 범위가 확장

![](/CS/hongong/img/cpu.png)

## 멀티코어

- 코어를 여러 개 포함하고 있는 CPU를 **멀티코어 CPU** 또는 **멀티코어 프로세서**라고 부름
- 멀티코어의 처리 속도는 단일코어보다 빠름
- 하지만 CPU의 연산 속도가 코어 수에 비례하여 증가하지는 않는다.
    - 코어마다 처리할 연산이 적절히 분배되지 않으면 코어 수에 비례하여 연산 속도가 증가하지 않음
    - 처리하고자 하는 작업량보다 코어 수가 지나치게 많아도 성능에는 크게 영향이 없음
- 코어마다 처리할 명령어들을 얼마나 적절하게 분배하느냐에 따라 연산 속도는 크게 달라짐

# 스레드와 멀티스레드

**CPU**에서 사용되는 **하드웨어적 스레드**와 **프로그램**에서 사용되는 **소프트웨어적 스레드**

![](/CS/hongong/img/스레드.png)

## 하드웨어적 스레드

- ‘하나의 코어가 동시에 처리하는 명령어 단위’
- CPU에서 사용되는 스레드
- 1코어 1스레드 CPU 기준
    - 명령어를 실행하는 부품이 하나 있고, 한 번에 하나씩 명령어를 실행하는 CPU
- 2코어 4스레드 CPU 기준
    - 명령어를 실행하는 부품을 두 개 포함하고, 한 번에 네 개의 명령어를 처리할 수 있는 CPU

![](/CS/hongong/img/2코어_4스레드.png)

## 소프트웨어적 스레드

- ‘하나의 프로그램에서 독립적으로 실행되는 단위’
- 프로그램에서 사용되는 스레드
- 하나의 프로그램은 실행되는 과정에서 한 부분만 실행될 수도 있지만, 프로그램의 여러 부분이 동시에 실행될 수도 있다.
- 아래의 기능이 동시에 수행되어야 할 때, 각 기능을 작동시키는 코드를 각각의 스레드로 만들면 동시에 실행시킬 수 있음
    
    ```bash
    1. 사용자로부터 입력받은 내용을 화면에 보여 주는 기능
    2. 사용자가 입력한 내용이 맞춤법에 맞는지 검사하는 기능
    3. 사용자가 입력한 내용을 수시로 저장하는 기능
    ```
    
    ![](/CS/hongong/img/소프트웨어적_스레드.png)
    
- 한 번에 하나씩 명령어를 처리하는 1코어 1스레드 CPU도 소프트웨어적 스레드를 수십 개 실행할 수 있다.

## 멀티스레드 프로세서

```
💡 용어의 혼동 방지를 위해 소프트웨어적으로 정의된 스레드는 '스레드', CPU에서 사용되는 스레드는 '하드웨어 스레드'라고 지칭
```

하나의 코어로 여러 명령어를 동시에 처리하는 기술인 하드웨어적 스레드

### 작동 원리

- 가장 큰 핵심은 ⭐️ 레지스터⭐️
- 하나의 코어로 여러 명령어를 동시에 처리하도록 만들려면 하나의 명령어를 처리하기 위해 **꼭 필요한 레지스터**(편의상 레지스터 세트라 지칭)를 여러 개 가지고 있으면 됨
    - 프로그램 카운터
    - 스택 포인터
    - 메모리 버퍼 레지스터
    - 메모리 주소 레지스터

![](/CS/hongong/img/멀티스레드_프로세서.png)

- 메모리 속 프로그램 입장에서 봤을 때 하드웨어 스레드는 마치 ‘한 번에 하나의 명령어를 처리하는 CPU’나 다름없다. 그래서 하드웨어 스레드를 **논리 프로세서** (logical processor) 라고 부르기도 한다.
    - 2코어 4스레드 CPU는 한 번에 네 개의 명령어를 처리할 수 있는데, 프로그램 입장에서 봤을 땐 한 번에 하나의 명령어를 처리하는 CPU가 네 개 있는 것처럼 보임

# 멀티코어와 멀티스레드

- **코어**는 명령어를 실행할 수 있는 ‘하드웨어 부품’
- **스레드**는 ‘명령어를 실행하는 단위’
- **멀티코어 프로세서**는 명령어를 실행할 수 있는 하드웨어 부품이 CPU 안에 두 개 이상 있는 CPU
- **멀티스레드 프로세서**는 하나의 코어로 여러 개의 명령어를 동시에 실행할 수 있는 CPU